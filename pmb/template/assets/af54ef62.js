import{p as y,r,j as e,v as a,w as h,T as L,aA as o,ay as P,at as C,bg as i,bc as S}from"./a765d8e4.js";import{A as v,a as T}from"./1ed0e1db.js";import{C as j,L as f}from"./78e9894b.js";import{C as W}from"./5427db68.js";function k(){const{signIn:g}=y(),[l,s]=r.useState(!1),[m,x]=r.useState(""),[u,w]=r.useState(""),[d,p]=r.useState(!0);return e(j,{component:"main",maxWidth:"xs",children:a(h,{sx:{paddingTop:8,display:"flex",flexDirection:"column",alignItems:"center"},children:[e(L,{component:"h1",variant:"h5",children:"账号密码注册"}),a(h,{component:"form",onSubmit:async t=>{t.preventDefault();const b=new FormData(t.currentTarget);if(s(!0),m!==u){p(!1),s(!1);return}else p(!0);try{const n=await v.post("reg",{json:{user_name:b.get("username"),password:m}}),c=await T(n,"注册失败");c.token&&g(c)}catch(n){S(n,"注册失败")}finally{s(!1)}},sx:{mt:1},children:[e(o,{margin:"normal",required:!0,fullWidth:!0,id:"username",label:"用户名",name:"username",autoComplete:"username",inputProps:{minLength:3,maxLength:24}}),e(o,{margin:"normal",required:!0,fullWidth:!0,name:"password",label:"密码",type:"password",id:"password",autoComplete:"current-password",inputProps:{minLength:6,maxLength:42},onChange:t=>x(t.target.value)}),e(o,{margin:"normal",required:!0,fullWidth:!0,name:"confirmPassword",label:"确认密码",type:"password",id:"confirmPassword",autoComplete:"current-password",inputProps:{minLength:6,maxLength:42},value:u,onChange:t=>w(t.target.value),error:!d,helperText:d?"":"两次密码不一致"}),e(P,{type:"submit",fullWidth:!0,variant:"contained",sx:{mt:2,mb:2},disabled:l,children:l?a(C,{children:[e(W,{size:24,sx:{color:"secondary",position:"absolute",top:"50%",left:"50%",marginTop:"-12px",marginLeft:"-12px"}}),"注册中..."]}):"注 册"}),a(i,{container:!0,children:[e(i,{item:!0,xs:!0,children:e(f,{href:"#",variant:"body2",children:"注册失败?"})}),e(i,{item:!0,children:e(f,{href:"/login",variant:"body2",children:"登录"})})]})]})]})})}export{k as default};
