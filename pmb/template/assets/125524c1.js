import{p as c,r as h,j as e,v as a,w as l,T as g,aA as d,ay as f,at as x,bg as r,bc as b}from"./a765d8e4.js";import{A as y,a as w}from"./1ed0e1db.js";import{C as L,L as u}from"./78e9894b.js";import{C as S}from"./5427db68.js";function A(){const{signIn:p}=c(),[n,s]=h.useState(!1);return e(L,{component:"main",maxWidth:"xs",children:a(l,{sx:{paddingTop:8,display:"flex",flexDirection:"column",alignItems:"center"},children:[e(g,{component:"h1",variant:"h5",children:"账号密码登录"}),a(l,{component:"form",onSubmit:async i=>{i.preventDefault();const o=new FormData(i.currentTarget);s(!0);try{const t=await y.post("login",{json:{user_name:o.get("username"),password:o.get("password")}}),m=await w(t,"登录失败");m.token&&p(m)}catch(t){b(t,"登录失败")}finally{s(!1)}},sx:{mt:1},children:[e(d,{margin:"normal",required:!0,fullWidth:!0,id:"username",label:"用户名",name:"username",autoComplete:"username",inputProps:{minLength:3,maxLength:24}}),e(d,{margin:"normal",required:!0,fullWidth:!0,name:"password",label:"密码",type:"password",id:"password",autoComplete:"current-password",inputProps:{minLength:6,maxLength:42}}),e(f,{type:"submit",fullWidth:!0,variant:"contained",sx:{mt:2,mb:2},disabled:n,children:n?a(x,{children:[e(S,{size:24,sx:{color:"secondary",position:"absolute",top:"50%",left:"50%",marginTop:"-12px",marginLeft:"-12px"}}),"登录中..."]}):"登 录"}),a(r,{container:!0,children:[e(r,{item:!0,xs:!0,children:e(u,{href:"#",variant:"body2",children:"忘记密码?"})}),e(r,{item:!0,children:e(u,{href:"/reg",variant:"body2",children:"注册"})})]})]})]})})}export{A as default};
